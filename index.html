
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hướng dẫn sử dụng công cụ số</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- Style Chung cho Trang Tích Hợp --- */
        .app-tab-btn {
            @apply px-4 py-2 rounded-lg font-medium text-gray-300 transition-all duration-300;
        }
        .app-tab-btn:hover {
            @apply bg-gray-700 text-white;
        }
        
        /* Tách riêng hiệu ứng active cho từng nút (ĐÃ VIẾT LẠI BẰNG CSS THUẦN) */
        #btn-h5p.active {
            background-color: #0891b2; /* Màu lam (bg-cyan-600) */
            color: #ffffff; /* text-white */
            /* Hiệu ứng chiếu sáng màu lam */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 
                        0 4px 6px -4px rgba(0, 0, 0, 0.1),
                        0 0 15px 4px rgba(6, 182, 212, 0.7); 
        }
        #btn-process.active {
            background-color: #1d4ed8; /* Màu xanh (bg-blue-700) */
            color: #ffffff; /* text-white */
            /* Hiệu ứng chiếu sáng màu xanh */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 
                        0 4px 6px -4px rgba(0, 0, 0, 0.1),
                        0 0 15px 4px rgba(59, 130, 246, 0.7);
        }

        .app-container.hidden {
            display: none;
        }

        /* --- BẮT ĐẦU: Style đã được định danh cho Ứng dụng 1 (H5P) --- */
        /* Các style này chỉ áp dụng cho #h5p-app */
        #h5p-app {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #0F172A; /* slate-900 */
            color: #E2E8F0; /* slate-200 */
        }
        #h5p-app .feature-card {
            @apply bg-slate-800 p-6 rounded-lg shadow-lg border border-slate-700 transition-all duration-300 hover:shadow-cyan-500/20 hover:border-cyan-600 hover:-translate-y-1;
        }
        #h5p-app .vertical-tabs button {
            @apply w-full text-left p-4 rounded-lg flex items-start space-x-3 text-slate-300 transition-all duration-200 text-sm;
        }
        /* Đã tách riêng :hover và .active để làm rõ trạng thái được chọn */
        #h5p-app .vertical-tabs button:hover {
            @apply bg-slate-700 text-slate-100; /* Hiệu ứng hover đơn giản */
        }
        #h5p-app .vertical-tabs button.active {
            @apply bg-slate-700 text-cyan-400 font-semibold; /* Màu active nổi bật */
            /* Thêm hiệu ứng chiếu sáng (glow) */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 
                        0 2px 4px -2px rgba(0, 0, 0, 0.1),
                        0 0 12px 3px rgba(6, 182, 212, 0.6); /* Sáng màu lam (cyan-500) */
        }
        #h5p-app .vertical-tab-content {
            display: none;
        }
        #h5p-app .vertical-tab-content.active {
            display: block;
            animation: fadeInH5P 0.5s ease-in-out; /* Đổi tên animation */
        }
        @keyframes fadeInH5P { /* Đổi tên animation */
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #h5p-app .callout {
            @apply p-4 rounded-lg border-l-4 mt-6 flex items-baseline space-x-3;
        }
        #h5p-app .callout-tip { @apply bg-blue-900 border-blue-500 text-blue-200; }
        #h5p-app .callout-warning { @apply bg-yellow-900 border-yellow-500 text-yellow-200; }
        #h5p-app .callout-con { @apply bg-red-900 border-red-500 text-red-200; }
        #h5p-app .step { @apply relative pl-10 pb-8 border-l-2 border-cyan-700; }
        #h5p-app .step:last-child { @apply border-l-transparent pb-0; }
        #h5p-app .step-icon { @apply absolute -left-4 top-0 h-8 w-8 rounded-full bg-cyan-500 text-slate-900 flex items-center justify-center font-bold; }
        #h5p-app .step-title { @apply text-xl font-semibold text-cyan-400 mb-2; }
        #h5p-app .step-content { @apply text-gray-300; }
        #h5p-app .ai-tool-card { @apply bg-slate-800 p-6 rounded-lg border border-slate-700 shadow-lg mb-8; }
        #h5p-app .ai-input { @apply w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500; }
        #h5p-app .ai-button { @apply px-5 py-2 bg-cyan-600 text-white font-semibold rounded-lg hover:bg-cyan-500 transition-colors duration-200 flex items-center justify-center space-x-2; }
        #h5p-app .ai-button svg { @apply w-5 h-5; }
        #h5p-app .ai-output { @apply w-full p-4 mt-4 bg-slate-900 border border-slate-700 rounded-lg text-sm text-gray-300 whitespace-pre-wrap h-64 overflow-y-auto; }
        #h5p-app .loader { @apply w-5 h-5 border-2 border-slate-400 border-t-transparent rounded-full animate-spin; }
        /* --- KẾT THÚC: Style cho Ứng dụng 1 --- */


        /* --- BẮT ĐẦU: Style đã được định danh cho Ứng dụng 2 (Quy Trình Sáng Tạo) --- */
        /* Các style này chỉ áp dụng cho #process-app */
        
        #process-app {
             font-family: 'Inter', sans-serif;
        }
        /* @import is in head */
        
        #process-app .nav-button {
            display: flex;
            align-items: center;
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: left;
            position: relative; 
        }
        #process-app .nav-button.active {
            background-color: #BEE3F8; /* nhat hon blue-100 */
            color: #172554; /* blue-950 */
            font-weight: 600;
            /* ĐÃ THÊM HIỆU ỨNG CHIẾU SÁNG (GLOW) CHO NÚT */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 
                        0 2px 4px -2px rgba(0, 0, 0, 0.1),
                        0 0 12px 3px rgba(59, 130, 246, 0.5); /* Sáng màu xanh (blue-500) */
        }
        #process-app .nav-button:not(.active) {
            color: #334155; /* slate-700 */
        }
        #process-app .nav-button:not(.active):hover {
            background-color: #EFF6FF; /* blue-50 */
            color: #1E40AF; /* blue-800 */
            transform: translateX(3px); /* Hiệu ứng di chuyển */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        #process-app .nav-button svg {
            width: 1.25rem;
            height: 1.25rem;
            margin-right: 0.75rem;
            color: inherit; 
            transition: all 0.3s ease;
        }
        #process-app .nav-button.active svg {
            /* filter: drop-shadow(0 0 6px rgba(45, 106, 219, 0.7)); */ /* Đã xóa filter này để dùng box-shadow */
        }

        /* Phân biệt step-content cho Process */
        #process-app .step-content {
            animation: fadeInProcess 0.5s ease; /* Renamed fadeIn to fadeInProcess */
        }
        @keyframes fadeInProcess { /* Renamed fadeIn to fadeInProcess */
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Phân biệt ai-input cho Process */
        #process-app .ai-input {
            width: 100%;
            border: 1px solid #D1D5DB;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            font-size: 0.875rem;
            color: #374151;
            background-color: #F9FAFB;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        #process-app .ai-input:focus {
            outline: none;
            border-color: #1D4ED8; /* blue-700 */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2); /* Sáng viền xanh */
        }
        /* Phân biệt ai-button cho Process */
        #process-app .ai-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            color: white;
            background: linear-gradient(to right, #1E40AF, #1D4ED8); /* blue-800 to blue-700 */
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        #process-app .ai-button:hover {
            background: linear-gradient(to right, #1D4ED8, #2563EB); /* blue-700 to blue-600 */
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        #process-app .ai-button:disabled {
            background: #9CA3AF;
            cursor: not-allowed;
            opacity: 0.7;
            transform: none;
            box-shadow: none;
        }
        /* Phân biệt spinner cho Process */
        #process-app .spinner {
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 0.5rem;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        /* Phân biệt ai-output cho Process */
        #process-app .ai-output {
            background-color: #F8FAFC; /* slate-50 */
            border: 1px solid #E2E8F0; /* slate-200 */
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            color: #334155; /* slate-700 */
            font-family: monospace;
            white-space: pre-wrap;
            animation: fadeInProcess 0.5s ease; /* Renamed */
        }
        #process-app .content-card {
            background-color: #F8FAFC; /* slate-50 */
            border: 1px solid #E2E8F0; /* slate-200 */
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05), 0 1px 2px 0 rgba(0, 0, 0, 0.02);
        }
        #process-app .card-title {
            display: flex;
            align-items: center;
            font-size: 1.125rem;
            font-weight: 600;
            color: #1E3A8A; /* blue-900 */
            margin-bottom: 0.75rem;
        }
        #process-app .card-title svg {
            width: 1.25rem;
            height: 1.25rem;
            margin-right: 0.5rem;
            color: #1D4ED8; /* blue-700 */
        }
        #process-app .card-body {
            color: #475569; /* slate-600 */
            margin-left: 2rem; /* Thụt lề nội dung */
        }
        #process-app .nav-icon {
            width: 1.25rem;
            height: 1.25rem;
            margin-right: 0.75rem;
            color: inherit; 
            transition: all 0.3s ease;
        }
        /* --- KẾT THÚC: Style cho Ứng dụng 2 --- */
    </style>
</head>
<body class="bg-gray-200">

    <!-- Thanh Điều Hướng Chung -->
    <nav class="bg-gray-800 p-4 sticky top-0 z-50">
        <div class="container mx-auto flex flex-wrap items-center space-x-4">
            <span class="text-white font-bold text-lg mr-4">Trang Tích Hợp:</span>
            <button id="btn-h5p" class="app-tab-btn">Hướng dẫn sử dụng H5P</button>
            <button id="btn-process" class="app-tab-btn">Quy trình tích hợp AI và lập trình</button> <!-- Đã đổi tên -->
        </div>
    </nav>

    <!-- Container cho Ứng dụng 1: H5P Masterclass -->
    <!-- Thêm các class của body cũ vào đây -->
    <div id="h5p-app" class="app-container antialiased">
        <!-- Header -->
        <header class="container mx-auto px-6 py-12 text-center">
            <h1 class="text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 mb-4">
                MASTERCLASS H5P
            </h1>
            <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                Hướng dẫn sử dụng H5P (HTML5 Package) để tạo bài giảng E-learning
            </p>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-6 pb-24">

            <!-- Section 1: Core Workflow -->
            <section id="workflow" class="mb-24">
                <h2 class="text-3xl font-bold text-white text-center mb-6">Quy trình Cốt lõi</h2>
                <p class="text-center text-lg text-gray-400 mb-12">Nắm vững 4 thao tác quản lý cơ bản (Mục 3 & 4 trong tài liệu)</p>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    
                    <!-- Card 1: Cập nhật -->
                    <div class="feature-card">
                        <div class="flex items-center justify-center h-12 w-12 rounded-full bg-blue-900 text-blue-300 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" /></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-white mb-3">1. Cập nhật Loại Nội dung</h3>
                        <p class="text-sm text-gray-400 mb-4">Giữ cho các công cụ (như Video Tương tác) của bạn luôn ở phiên bản mới nhất.</p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-300">
                            <li>Khi bạn ở trang <span class="font-semibold text-cyan-400">chọn loại nội dung</span> (Select content type).</li>
                            <li>Tìm loại nội dung có dòng chữ <span class="font-semibold text-cyan-400">Update available</span> (Có bản cập nhật).</li>
                            <li>Nhấp vào đó và chọn <span class="font-semibold text-cyan-400">Update</span> để cập nhật.</li>
                        </ol>
                    </div>

                    <!-- Card 2: Tải xuống -->
                    <div class="feature-card">
                        <div class="flex items-center justify-center h-12 w-12 rounded-full bg-green-900 text-green-300 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" /></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-white mb-3">2. Tải xuống (Đóng gói)</h3>
                        <p class="text-sm text-gray-400 mb-4">Lưu bài giảng H5P của bạn thành một tệp <span class="font-semibold text-cyan-400">.h5p</span> duy nhất để nộp bài hoặc di chuyển.</p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-300">
                            <li>Mở một nội dung H5P bạn đã tạo.</li>
                            <li>Nhấp vào nút <span class="font-semibold text-cyan-400">Reuse</span> (Tái sử dụng) ở phía dưới.</li>
                            <li>Chọn <span class="font-semibold text-cyan-400">Download</span> (Tải xuống).</li>
                        </ol>
                    </div>

                    <!-- Card 3: Tải lên -->
                    <div class="feature-card">
                        <div class="flex items-center justify-center h-12 w-12 rounded-full bg-purple-900 text-purple-300 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" /></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-white mb-3">3. Tải tệp H5P lên</h3>
                        <p class="text-sm text-gray-400 mb-4">Đưa một tệp <span class="font-semibold text-cyan-400">.h5p</span> (từ máy tính, hoặc người khác gửi) lên hệ thống H5P của bạn.</p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-300">
                            <li>(Bạn không thể mở file .h5p trực tiếp)</li>
                            <li>Trong trình soạn thảo H5P, chọn tab <span class="font-semibold text-cyan-400">Upload</span>.</li>
                            <li>Tìm tệp <span class="font-semibold text-cyan-400">.h5p</span> trên máy và tải nó lên.</li>
                            <li>Nhấp vào <span class="font-semibold text-cyan-400">Save</span> (Lưu) để sử dụng.</li>
                        </ol>
                    </div>

                    <!-- Card 4: Tái sử dụng -->
                    <div class="feature-card">
                        <div class="flex items-center justify-center h-12 w-12 rounded-full bg-yellow-900 text-yellow-300 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876V5.25a.375.375 0 00-.375-.375H5.625a.375.375 0 00-.375.375v3.375c0 .621.504 1.125 1.125 1.125h9.75A1.125 1.125 0 0115.75 17.25z" /></svg>
                        </div>
                        <h3 class="text-2xl font-semibold text-white mb-3">4. Tái sử dụng (Copy/Paste)</h3>
                        <p class="text-sm text-gray-400 mb-4">Sao chép một phần (như một câu hỏi) từ bài giảng này để dán vào một bài giảng khác.</p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-300">
                            <li>Mở nội dung H5P *nguồn* (nơi bạn muốn copy).</li>
                            <li>Nhấp vào <span class="font-semibold text-cyan-400">Reuse</span> -> <span class="font-semibold text-cyan-400">Copy content</span>.</li>
                            <li>Mở *trình soạn thảo* của nội dung H5P *đích* (nơi bạn muốn dán).</li>
                            <li>Nhấp vào nút <span class="font-semibold text-cyan-400">Paste</span> (Dán) trên thanh công cụ.</li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- Section 2: Workshop -->
            <section id="workshop">
                <h2 class="text-3xl font-bold text-white text-center mb-12">Xưởng Thực hành (Mục 5)</h2>
                
                <div class="grid md:grid-cols-4 gap-8">
                    <!-- Vertical Tabs Navigation -->
                    <div class="md:col-span-1 vertical-tabs space-y-3 flex flex-col">
                        <button data-tab="tab-presentation" class="active">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 flex-shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
                            <span>Course Presentation</span>
                        </button>
                        <button data-tab="tab-video">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 flex-shrink-0">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z" />
                            </svg>
                            <span>Interactive Video</span>
                        </button>
                        <button data-tab="tab-truefalse">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 flex-shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            <span>True/False Question</span>
                        </button>
                        <button data-tab="tab-flashcards">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 flex-shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876V5.25a.375.375 0 00-.375-.375H5.625a.375.375 0 00-.375.375v3.375c0 .621.504 1.125 1.125 1.125h9.75A1.125 1.125 0 0115.75 17.25z" /></svg>
                            <span>Flashcards</span>
                        </button>
                        <button data-tab="tab-ai-assistant">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 flex-shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM18 13.5l.375 1.5L18 16.5l-.375-1.5L16.5 15l1.125-.375L18 13.5z" /></svg>
                            <span class="font-semibold text-yellow-300">Trợ lý AI</span> <!-- Đã xóa icon ✨ -->
                        </button>
                    </div>

                    <!-- Vertical Tabs Content -->
                    <div class="md:col-span-3">
                        
                        <!-- Tab 1: Course Presentation -->
                        <div id="tab-presentation" class="vertical-tab-content active">
                            <h3 class="text-3xl font-bold text-white mb-6">Tạo Bài thuyết trình (Course Presentation)</h3>
                            <p class="text-lg text-gray-300 mb-8">Đây là "khung sườn" chính của bài giảng, cho phép bạn soạn thảo các slide tương tác.</p>
                            
                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">1. Tạo bài thuyết trình</h4>
                                <p>Chọn <span class="font-semibold text-cyan-400">Create Content</span> và chọn <span class="font-semibold text-cyan-400">Course Presentation</span>.</p>
                            </div>

                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">2. Thêm Slide và Tiêu đề</h4>
                                <p>Nhấn <span class="font-semibold text-cyan-400">Add new slide</span>. Để đặt tên slide, nhấn vào menu "Trang trình bày" và chọn biểu tượng bút chì.</p>
                            </div>

                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">3. Thêm Ảnh và Văn bản</h4>
                                <ul class="list-disc list-inside space-y-2 text-gray-300">
                                    <li><span class="font-semibold">Thêm Văn bản:</span> Kéo thả công cụ <span class="font-semibold text-cyan-400">Text (T)</span> vào slide.</li>
                                    <li><span class="font-semibold">Thêm Hình ảnh:</span> Kéo thả nút <span class="font-semibold text-cyan-400">Hình ảnh</span>. Nhấn <span class="font-semibold text-cyan-400">+Add</span> để tải ảnh lên.</li>
                                    <li>Luôn điền <span class="font-semibold text-cyan-400">Metadata</span> (Siêu dữ liệu) và <span class="font-semibold text-cyan-400">Alternative text</span> (Văn bản thay thế) cho ảnh.</li>
                                </ul>
                            </div>

                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">4. Thêm Tóm tắt (Summary)</h4>
                                <p>Kéo thả công cụ <span class="font-semibold text-cyan-400">Summary</span> vào slide cuối cùng. Nhấn <span class="font-semibold text-cyan-400">Thêm Câu lệnh</span> để tạo các lựa chọn.</p>
                                
                                <div class="callout callout-warning">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 flex-shrink-0 mt-0.5">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                                    </svg>
                                    <div>
                                        <h5 class="font-bold mb-1">Lưu ý quan trọng</h5>
                                        <p>Bạn chỉ có thể thêm tương tác (như câu hỏi) vào các slide của <span class="font-semibold text-yellow-300">Course Presentation</span>. Bạn không thể thêm câu hỏi vào các slide của <span class="font-semibold text-yellow-300">Interactive Video</span> (vì video đã là một công cụ riêng biệt).</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tab 2: Interactive Video -->
                        <div id="tab-video" class="vertical-tab-content">
                            <h3 class="text-3xl font-bold text-white mb-6">Tạo Video Tương tác (Interactive Video)</h3>
                            <p class="text-lg text-gray-300 mb-8">Biến một video thụ động thành một trải nghiệm học tập chủ động.</p>

                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">1. Tải video lên (Step 1)</h4>
                                <p>Trong trình chỉnh sửa, bạn có 3 tab. Ở tab đầu tiên, nhấn <span class="font-semibold text-cyan-400">+</span> và <span class="font-semibold text-cyan-400">Tải file video lên</span> (hoặc dán link YouTube).</p>
                                <div class="callout callout-tip">
                                    <!-- ĐÃ XÓA ICON SVG GÂY LỖI KHỎI ĐÂY -->
                                    <div>
                                        <h5 class="font-bold mb-1">Mẹo Kỹ thuật Tương thích</h5>
                                        <p>Để đảm bảo video hoạt động trên mọi trình duyệt, hãy tải lên cả hai định dạng <span class="font-semibold text-blue-300">MP4</span> và <span class="font-semibold text-blue-300">WebM</span>.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">2. Thêm tương tác (Step 2)</h4>
                                <p>Chuyển sang tab <span class="font-semibold text-cyan-400">Thêm tương tác</span>. Phát video, sau đó kéo thả các công cụ (như <span class="font-semibold text-cyan-400">Text</span>, <span class="font-semibold text-cyan-400">Image</span>, <span class="font-semibold text-cyan-400">Multiple Choice</span>) vào video.</p>
                                <ul class="list-disc list-inside space-y-2 text-gray-300 mt-2">
                                    <li>Thiết lập <span class="font-semibold text-cyan-400">Thời gian hiển thị</span> (Display time).</li>
                                    <li>Tích vào <span class="font-semibold text-cyan-400">Tạm dừng video</span> (Pause video) nếu muốn video dừng lại ở tương tác đó.</li>
                                </ul>
                            </div>

                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">3. Đánh dấu (Bookmarks)</h4>
                                <p>Quay lại tab <span class="font-semibold text-cyan-400">Thêm tương tác</span>. Di chuyển đầu phát đến vị trí quan trọng (ví dụ: 0:30) và nhấn nút <span class="font-semibold text-cyan-400">Add bookmark</span> (biểu tượng cờ). Thao tác này tạo ra mục lục cho video.</p>
                            </div>
                            
                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">4. Thêm Tóm tắt (Step 3)</h4>
                                <p>Chuyển sang tab <span class="font-semibold text-cyan-400">Tác vụ tóm tắt</span> (Summary task) để thêm các câu hỏi ôn tập cuối video. (Tương tự như Summary của Course Presentation).</p>
                            </div>
                        </div>

                        <!-- Tab 3: True/False Question -->
                        <div id="tab-truefalse" class="vertical-tab-content">
                            <h3 class="text-3xl font-bold text-white mb-6">Tạo Câu hỏi Đúng/Sai (True/False)</h3>
                            <p class="text-lg text-gray-300 mb-8">Lý tưởng cho các câu hỏi kiểm tra kiến thức nhanh.</p>
                            
                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">1. Tạo nội dung</h4>
                                <ul class="list-disc list-inside space-y-2 text-gray-300">
                                    <li>Nhập <span class="font-semibold text-cyan-400">Title</span> (Tiêu đề) và <span class="font-semibold text-cyan-400">Question</span> (Câu hỏi).</li>
                                    <li>Chọn <span class="font-semibold text-cyan-400">Correct answer</span> (Đáp án đúng) là <span class="font-semibold text-cyan-400">True</span> hoặc <span class="font-semibold text-cyan-400">False</span>.</li>
                                </ul>
                            </div>

                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">2. Cung cấp Phản hồi (Rất quan trọng)</h4>
                                <p>Mở mục <span class="font-semibold text-cyan-400">Cài đặt hành vi</span> (Behavioural settings).</p>
                                <ul class="list-disc list-inside space-y-2 text-gray-300 mt-2">
                                    <li>Nhập <span class="font-semibold text-cyan-400">Phản hồi về câu trả lời đúng</span>.</li>
                                    <li>Nhập <span class="font-semibold text-cyan-400">Phản hồi về câu trả lời sai</span>.</li>
                                </ul>
                                <p class="mt-2">Việc này giúp sinh viên biết tại sao họ đúng hoặc sai, tăng hiệu quả học tập.</p>
                            </div>
                        </div>

                        <!-- Tab 4: Flashcards -->
                        <div id="tab-flashcards" class="vertical-tab-content">
                            <h3 class="text-3xl font-bold text-white mb-6">Tạo Thẻ học (Flashcards)</h3>
                            <p class="text-lg text-gray-300 mb-8">Giúp người học ghi nhớ từ vựng, khái niệm, công thức hoặc sự kiện.</p>
                            
                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">1. Mô tả nhiệm vụ</h4>
                                <p>Nhập hướng dẫn chung cho bộ thẻ vào ô <span class="font-semibold text-cyan-400">Task description</span> (Mô tả nhiệm vụ).</p>
                            </div>

                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">2. Thiết lập Thẻ (Card)</h4>
                                <p>Đây là nội dung cho từng thẻ một.</p>
                                <ul class="list-disc list-inside space-y-2 text-gray-300 mt-2">
                                    <li><span class="font-semibold text-cyan-400">Question:</span> Gợi ý (ví dụ: "Tên tiếng Tây Ban Nha của quả này?").</li>
                                    <li><span class="font-semibold text-cyan-400">Answer:</span> Câu trả lời đúng (ví dụ: "Fresa").</li>
                                    <li><span class="font-semibold text-cyan-400">Image:</span> Tải ảnh minh họa lên.</li>
                                    <li>Đừng quên nhấn <span class="font-semibold text-cyan-400">Chỉnh sửa bản quyền</span> (Edit copyright).</li>
                                </ul>
                            </div>
                            
                            <div class="mb-8">
                                <h4 class="text-2xl font-semibold text-cyan-400 mb-3">3. Thêm thẻ khác</h4>
                                <p>Nhấn nút <span class="font-semibold text-cyan-400">+ ADD CARD</span> để thêm thẻ mới và lặp lại quy trình. Bạn có thể dùng mũi tên để sắp xếp lại thứ tự các thẻ.</p>
                            </div>
                        </div>

                        <!-- Tab 5: AI Assistant -->
                        <div id="tab-ai-assistant" class="vertical-tab-content">
                            <h3 class="text-3xl font-bold text-white mb-6">✨ Trợ lý AI (Gemini)</h3>
                            <p class="text-lg text-gray-300 mb-8">Sử dụng AI để tăng tốc quá trình soạn thảo nội dung. Sao chép kết quả và dán vào H5P.</p>

                            <!-- AI Tool 1: Flashcard Generator -->
                            <div class="ai-tool-card">
                                <h4 class="text-2xl font-semibold text-white mb-4">Tạo Flashcards (Thẻ học)</h4>
                                <div class="space-y-4">
                                    <div>
                                        <label for="flashcard-topic" class="block text-sm font-medium text-gray-300 mb-2">Nhập chủ đề:</label>
                                        <input type="text" id="flashcard-topic" class="ai-input" placeholder="Ví dụ: Từ vựng trái cây tiếng Anh">
                                    </div>
                                    <button id="generate-flashcards-btn" class="ai-button">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" /></svg>
                                        <span>Tạo Thẻ</span>
                                    </button>
                                    <div id="flashcard-loader" class="hidden flex items-center space-x-2 text-gray-400">
                                        <div class="loader"></div>
                                        <span>Đang tạo...</span>
                                    </div>
                                    <div>
                                        <label for="flashcard-output" class="block text-sm font-medium text-gray-300 mb-2">Kết quả (sao chép và dán vào H5P):</label>
                                        <pre id="flashcard-output" class="ai-output"></pre>
                                    </div>
                                </div>
                            </div>

                            <!-- AI Tool 2: Quiz Generator -->
                            <div class="ai-tool-card">
                                <h4 class="text-2xl font-semibold text-white mb-4">Tạo Câu hỏi từ Văn bản</h4>
                                <div class="space-y-4">
                                    <div>
                                        <label for="quiz-source-text" class="block text-sm font-medium text-gray-300 mb-2">Dán văn bản nguồn (nội dung slide, kịch bản video...):</label>
                                        <textarea id="quiz-source-text" rows="6" class="ai-input" placeholder="Dán nội dung của bạn vào đây..."></textarea>
                                    </div>
                                    <div>
                                        <label for="quiz-type" class="block text-sm font-medium text-gray-300 mb-2">Chọn loại câu hỏi:</label>
                                        <select id="quiz-type" class="ai-input bg-slate-700">
                                            <option value="Trắc nghiệm">Trắc nghiệm (Multiple Choice)</option>
                                            <option value="Đúng/Sai">Đúng/Sai (True/False)</option>
                                        </select>
                                    </div>
                                    <button id="generate-quiz-btn" class="ai-button">
                                         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" /></svg>
                                        <span>Tạo Câu hỏi</span>
                                    </button>
                                    <div id="quiz-loader" class="hidden flex items-center space-x-2 text-gray-400">
                                        <div class="loader"></div>
                                        <span>Đang phân tích và tạo...</span>
                                    </div>
                                    <div>
                                        <label for="quiz-output" class="block text-sm font-medium text-gray-300 mb-2">Kết quả (sao chép và dán vào H5P):</label>
                                        <pre id="quiz-output" class="ai-output"></pre>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 3: Pros and Cons -->
            <section id="pros-cons" class="mb-24">
                
                <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto"> <!-- Đã xóa mt-12 -->
                    <!-- Pros -->
                    <div class="callout callout-tip">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 flex-shrink-0"> <!-- Thay đổi thành w-5 h-5 (20px) và bỏ mt-1.5 -->
                          <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <div>
                            <h4 class="text-xl font-bold mb-3">Ưu điểm</h4>
                            <ul class="list-disc list-inside space-y-2 text-gray-300">
                                <li>Phần mềm miễn phí, phù hợp mọi đối tượng.</li>
                                <li>Nội dung công khai, dễ dàng chia sẻ.</li>
                                <li>Tương thích đa thiết bị (PC, tablet, mobile).</li>
                                <li>Có thể chỉnh sửa trực tiếp trên hệ thống.</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Cons -->
                    <div class="callout callout-con">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 flex-shrink-0"> <!-- Thay đổi thành w-5 h-5 (20px) và bỏ mt-1.5 -->
                          <path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <div>
                            <h4 class="text-xl font-bold mb-3">Nhược điểm ("Cạm bẫy")</h4>
                            <ul class="list-disc list-inside space-y-2 text-gray-300">
                                <li>Không có tùy chọn "Xem trước" (Preview).</li>
                                <li>Không thể nhập (import) file PowerPoint.</li>
                                <li>Không có tính năng quay màn hình/webcam.</li>
                                <li>Ít linh hoạt hơn các công cụ trả phí.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
            
        </main>
    </div>

    <!-- Container cho Ứng dụng 2: Quy Trình Sáng Tạo -->
    <!-- Thêm các class của body cũ vào đây -->
    <div id="process-app" class="app-container hidden bg-white text-slate-900 min-h-screen">
        <!-- Toàn bộ nội dung body của file thứ 2 được dán vào đây -->
        <div class="max-w-7xl mx-auto">
            <header class="p-5 bg-gradient-to-r from-blue-800 to-blue-700 text-white shadow-lg">
                <h1 class="text-2xl md:text-3xl font-bold text-center">Quy trình tích hợp AI và lập trình</h1> <!-- Đã đổi tên -->
            </header>

            <div class="md:grid md:grid-cols-4 bg-white shadow-2xl overflow-hidden min-h-[80vh]">
                <aside class="md:col-span-1 md:border-r border-slate-200 p-4 bg-slate-50">
                    <nav class="space-y-2 sticky top-4" aria-label="Các bước">
                        <button id="nav-step-1" class="nav-button active" onclick="showStep('step-1')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="nav-icon">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.001 6.001 0 0 0-4.902 2.364M12 18v-5.25m0 0a6.001 6.001 0 0 1 4.902 2.364m0 0C11.518 15.013 9.776 14.12 7.7 14.06M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                            </svg>
                            Ý Tưởng
                        </button>
                        <button id="nav-step-2" class="nav-button" onclick="showStep('step-2')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="nav-icon">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                            </svg>
                            Prompt
                        </button>
                        <button id="nav-step-3" class="nav-button" onclick="showStep('step-3')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="nav-icon">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.235a.375.375 0 0 1-.557-.328V8.765c0-.282.34-.44.557-.328l5.603 3.235Z" />
                            </svg>
                            Chạy Code
                        </button>
                        <button id="nav-step-4" class="nav-button" onclick="showStep('step-4')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="nav-icon">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V5.75A2.25 2.25 0 0 0 18 3.5H6A2.25 2.25 0 0 0 3.75 5.75v12.25A2.25 2.25 0 0 0 6 20.25Z" />
                            </svg>
                            Kiểm Thử
                        </button>
                        <button id="nav-step-5" class="nav-button" onclick="showStep('step-5')">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="nav-icon">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 1.5A2.25 2.25 0 0 0 4.5 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V3.75A2.25 2.25 0 0 0 17.25 1.5H6.75Z" />
                            </svg>
                            Publish
                        </button>
                    </nav>
                </aside>

                <main class="md:col-span-3 p-6 md:p-10 bg-white">
                    <div id="step-1" class="step-content">
                        <h2 class="text-3xl font-semibold text-blue-800 mb-6">Giai đoạn 1: Ý Tưởng (Idea)</h2>
                        <p class="text-lg text-slate-700 leading-relaxed mb-6">
                            Mọi dự án tuyệt vời đều bắt đầu từ một ý tưởng. Giai đoạn này là nền tảng để xác định rõ ràng bạn muốn xây dựng điều gì.
                        </p>
                        <div class="space-y-4">
                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 0 1 9 14.437V9.564Z" />
                                    </svg>
                                    1. Xác định Mục Tiêu
                                </h3>
                                <p class="card-body">Bạn muốn giải quyết vấn đề gì? Sản phẩm này dùng để làm gì? (Ví dụ: "Tôi muốn tạo một công cụ tính chỉ số BMI đơn giản" hoặc "Tôi muốn mô phỏng quá trình quang hợp cho học sinh").</p>
                            </div>
                            
                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 4.5v15m6-15v15m-10.875 0h15.75c.621 0 1.125-.504 1.125-1.125V5.625c0-.621-.504-1.125-1.125-1.125H4.125a1.125 1.125 0 0 0-1.125 1.125v12.75c0 .621.504 1.125 1.125 1.125Z" />
                                    </svg>
                                    2. Phác thảo Tính năng
                                </h3>
                                <div class="card-body">
                                    <p>Liệt kê các chức năng cốt lõi. Đừng quá chi tiết, hãy tập trung vào những gì "phải có".</p>
                                    <p class="text-sm text-slate-500 italic mt-2">*Ví dụ (Công cụ BMI): Cần ô nhập chiều cao, ô nhập cân nặng, nút "Tính toán", và một khu vực hiển thị kết quả.</p>
                                </div>
                            </div>

                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0 5.25-5.25M20.25 3.75v4.5m0-4.5h-4.5m4.5 0L15 9m5.25 11.25v-4.5m0 4.5h-4.5m4.5 0L15 15" />
                                    </svg>
                                    3. Xác định Phạm vi
                                </h3>
                                <p class="card-body">Giữ cho ý tưởng ban đầu thật đơn giản. Bạn luôn có thể thêm các tính năng phức tạp hơn sau này.</p>
                            </div>
                        </div>

                        <div class="mt-8 pt-6 border-t border-slate-200">
                            <h3 class="text-xl font-semibold text-slate-800 mb-4">Trợ giúp từ AI</h3>
                            <div class="content-card bg-blue-50 border-blue-200">
                                <p class="text-slate-700 mb-4">Bạn có một ý tưởng nhưng chưa rõ tính năng? Hãy để AI giúp bạn phác thảo!</p>
                                <div class="space-y-3">
                                    <label for="idea-input" class="block text-sm font-medium text-slate-700">Nhập ý tưởng cơ bản của bạn:</label>
                                    <textarea id="idea-input" class="ai-input" rows="3" placeholder="Ví dụ: một game rắn săn mồi đơn giản"></textarea>
                                    <button id="generate-features-btn" class="ai-button">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="m12.75 15 3-3m0 0-3-3m3 3h-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                        </svg>
                                        <span class="btn-text">Phác thảo tính năng</span>
                                        <span class="btn-loader hidden"><div class="spinner"></div> Đang xử lý...</span>
                                    </button>
                                </div>
                                <div id="features-output-container" class="mt-4 hidden">
                                    <h4 class="font-semibold text-slate-700">Gợi ý tính năng:</h4>
                                    <pre id="features-output" class="ai-output"></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="step-2" class="step-content hidden">
                        <h2 class="text-3xl font-semibold text-blue-800 mb-6">Giai đoạn 2: Prompt (Viết Yêu Cầu)</h2>
                        <p class="text-lg text-slate-700 leading-relaxed mb-6">
                            "Prompt" là chỉ thị, là yêu cầu bạn viết ra để hướng dẫn (thường là cho một AI) tạo ra sản phẩm. Đây là bước "chuyển hóa" ý tưởng thành hành động.
                        </p>
                        <div class="space-y-4">
                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0M3.75 18H7.5m3-6h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0M3.75 12H7.5" />
                                    </svg>
                                    Cách viết prompt hiệu quả:
                                </h3>
                                <ul class="list-disc list-outside ml-10 text-slate-600 space-y-2 card-body">
                                    <li><strong class="text-slate-700">Rõ ràng & Cụ thể:</strong> Thay vì nói "Làm một game", hãy nói: "Tạo một game 'Rắn săn mồi' (Snake) cơ bản bằng HTML, CSS và JavaScript trong 1 file duy nhất."</li>
                                    <li><strong class="text-slate-700">Cung cấp Bối cảnh:</strong> "Tôi đang xây dựng một trang web giáo dục. Hãy tạo một mô phỏng quang hợp đơn giản..."</li>
                                    <li><strong class="text-slate-700">Chỉ rõ Định dạng Đầu ra:</strong> "...sử dụng HTML và CSS. Đảm bảo code chạy được trực tuyến."</li>
                                </ul>
                            </div>
                            
                            <div class="mt-8 pt-6 border-t border-slate-200">
                                <h3 class="text-xl font-semibold text-slate-800 mb-4">Tạo Prompt Nhanh với AI</h3>
                                <div class="content-card bg-blue-50 border-blue-200">
                                    <p class="text-slate-700 mb-4">Mô tả ứng dụng bạn muốn, AI sẽ viết một prompt chi tiết cho bạn.</p>
                                    <div class="space-y-3">
                                        <label for="prompt-idea-input" class="block text-sm font-medium text-slate-700">Mô tả ý tưởng:</label>
                                        <textarea id="prompt-idea-input" class="ai-input" rows="4" placeholder="Ví dụ: Ứng dụng tính BMI, nhập cm và kg, hiển thị kết quả và phân loại (gầy, béo,...)"></textarea>
                                        <button id="generate-prompt-btn" class="ai-button">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="m12.75 15 3-3m0 0-3-3m3 3h-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                            </svg>
                                            <span class="btn-text">Tạo Prompt mẫu</span>
                                            <span class="btn-loader hidden"><div class="spinner"></div> Đang tạo...</span>
                                        </button>
                                    </div>
                                    <div id="prompt-output-container" class="mt-4 hidden">
                                        <h4 class="font-semibold text-slate-700">Prompt được tạo:</h4>
                                        <pre id="prompt-output" class="ai-output"></pre>
                                    </div>
                                </div>
                            </div>

                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9.865-4.126a2.25 2.25 0 0 1 3.248 0 2.25 2.25 0 0 1 3.248 0V16.5A2.25 2.25 0 0 1 13.5 18.75h-3A2.25 2.25 0 0 1 7.5 16.5V7.874Z" />
                                    </svg>
                                    Ví dụ Prompt cho Công cụ BMI:
                                </h3>
                                <blockquote class="mt-2 p-4 bg-white border-l-4 border-blue-500 text-slate-700 rounded-r-lg card-body">
                                    <p class="font-mono text-sm leading-relaxed">"Tạo một ứng dụng tính chỉ số BMI bằng HTML, CSS và JavaScript trong một tệp `index.html`.<br><br>
                                    1. Giao diện cần có:<br>
                                        - Tiêu đề "Tính chỉ số BMI".<br>
                                        - Một ô nhập "Chiều cao (cm)".<br>
                                        - Một ô nhập "Cân nặng (kg)".<br>
                                        - Một nút bấm "Tính toán".<br>
                                        - Một thẻ `&lt;div&gt;` với id "ketqua" để hiển thị kết quả.<br><br>
                                    2. JavaScript phải:<br>
                                        - Lấy giá trị từ các ô nhập khi nhấn nút.<br>
                                        - Tính BMI theo công thức: BMI = cân nặng / (chiều cao / 100)^2<br>
                                        - Hiển thị kết quả trong `div#ketqua`."
                                    </p>
                                </blockquote>
                            </div>
                        </div>
                    </div>

                    <div id="step-3" class="step-content hidden">
                        <h2 class="text-3xl font-semibold text-blue-800 mb-6">Giai đoạn 3: Chạy Code Trực Tuyến</h2>
                        <p class="text-lg text-slate-700 leading-relaxed mb-6">
                            Sau khi có prompt, bạn sẽ chạy nó để tạo ra phiên bản code đầu tiên.
                        </p>
                        <div class="space-y-4">
                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 7.5 3 5.25m0 0L.25 3M3 5.25v8.25m0-8.25L6 3m-3 2.25L6 7.5M6 3v8.25m0 0L8.25 15M6 11.25l-2.75 2.75M6 11.25L8.25 13.5m0 0L10.5 11.25m0 0L12.75 13.5m0 0L15 11.25m0 0L17.25 13.5m0 0L19.5 11.25m0 0L21.75 13.5m0 0L24 11.25M17.25 13.5l-2.25 2.25m0 0L12.75 18l-2.25-2.25m2.25 2.25v4.5m-3-4.5l-2.25 2.25M12.75 18l-2.25 2.25m0 0L8.25 21M12.75 18v4.5m3-4.5l2.25 2.25M12.75 18l2.25 2.25m0 0L17.25 21M12.75 18v4.5" />
                                    </svg>
                                    1. Thực thi Prompt
                                </h3>
                                <p class="card-body">Dán prompt của bạn vào và yêu cầu công cụ tạo code.</p>
                            </div>
                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 0 1-.375 1.514L7.875 21 4.5 17.625 6.375 15.75m0 0L9 13.5m-2.625 2.25L5.25 17.625m13.5-3.375v1.007a3 3 0 0 1-.375 1.514L16.125 21l-3.375-3.375L14.625 15.75m0 0L17.25 13.5m-2.625 2.25L13.5 17.625m-3.375-6.75v-1.007a3 3 0 0 1 .375-1.514L12.125 3l3.375 3.375L13.625 8.25m0 0L11.25 10.5m2.625-2.25L15 6.375m-3.375 6.75v-1.007a3 3 0 0 1 .375-1.514L12.125 3l3.375 3.375L13.625 8.25m0 0L11.25 10.5m2.625-2.25L15 6.375M6.375 8.25l-2.625 2.25L1.125 8.25m2.625 2.25v-1.007a3 3 0 0 1 .375-1.514L6.125 3l3.375 3.375L7.625 8.25m0 0L5.25 10.5M7.625 8.25 9 6.375" />
                                    </svg>
                                    2. Xem trước (Preview)
                                </h3>
                                <p class="card-body">Ngay lập tức sử dụng chức năng "Preview" (Xem trước) hoặc "Run" (Chạy) để xem sản phẩm ban đầu của bạn trông như thế nào và hoạt động ra sao.</p>
                            </div>
                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z" />
                                    </svg>
                                    3. Đánh giá Nhanh
                                </h3>
                                <p class="card-body">Đừng lo lắng nếu nó chưa hoàn hảo. Mục tiêu ở đây là có được một "bản nháp" để bắt đầu.</p>
                            </div>
                            
                            <div class="content-card bg-blue-50 border-blue-200">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-4.5 0V6.75A.75.75 0 0 1 14.25 6h1.5a.75.75 0 0 1 .75.75v3.75m-7.5-3.75h3a.75.75 0 0 1 .75.75V9m-3.75 0v3.75m0-3.75h3.75m-3.75 0h3.75m-3.75 0v3.75m0-3.75h3.75m-3.75 0v3.75m-3.75 0h3.75M9 12h3.75m-3.75 0v3.75m0-3.75h3.75m0 0v3.75m0-3.75h3.75m0-3.75h-3.75m0 0v3.75m0-3.75h3.75m0 0v3.75" />
                                    </svg>
                                    Thử chạy code của bạn:
                                </h3>
                                <div class="card-body">
                                    <p>Sử dụng link này để mở một trình biên dịch HTML trực tuyến. Bạn có thể dán code vào đó để kiểm tra:</p>
                                    <a href="https://hoclaptrinh.io/editors/html" target="_blank" class="inline-block mt-3 px-4 py-2 bg-blue-700 text-white font-medium rounded-lg shadow hover:bg-blue-800 transition-colors">
                                        Mở Trình biên dịch
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="step-4" class="step-content hidden">
                        <h2 class="text-3xl font-semibold text-blue-800 mb-6">Giai đoạn 4: Kiểm Thử Lặp (Iterative Testing)</h2>
                        <p class="text-lg text-slate-700 leading-relaxed mb-6">
                            Đây là trái tim của quy trình. Hiếm khi phiên bản đầu tiên là hoàn hảo. Chúng ta sẽ kiểm thử, tìm lỗi, và cải tiến liên tục.
                        </p>
                        
                        <div class="content-card bg-slate-50">
                            <h3 class="card-title">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7C14.453 4.546 13.232 4.5 12 4.5c-1.232 0-2.453.046-3.662.138a4.006 4.006 0 0 0-3.7 3.7C4.546 9.547 4.5 10.768 4.5 12c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7c1.209.092 2.43.138 3.662.138 1.232 0 2.453-.046 3.662-.138a4.006 4.006 0 0 0 3.7-3.7C19.454 14.453 19.5 13.232 19.5 12Z" />
                                </svg>
                            Đây là một vòng lặp:
                            </h3>
                            
                            <div class="flex flex-col md:flex-row justify-center items-center md:items-start space-y-6 md:space-y-0 md:space-x-12 p-4">
                                <div class="flex flex-col items-center p-6 space-y-2 w-full md:w-auto">
                                    <div class="p-4 bg-blue-100 text-blue-800 rounded-lg shadow-md w-64 text-center font-medium">1. Kiểm Thử (Test)</div>
                                    <div class="text-3xl text-slate-400">↓</div>
                                    <div class="p-4 bg-yellow-100 text-yellow-800 rounded-lg shadow-md w-64 text-center font-medium">2. Tìm Lỗi (Identify)</div>
                                    <div class="text-3xl text-slate-400">↓</div>
                                    <div class="p-4 bg-green-100 text-green-800 rounded-lg shadow-md w-64 text-center font-medium">3. Tinh Chỉnh (Refine)</div>
                                    <div class="text-3xl text-slate-400">↓</div>
                                    <div class="p-4 bg-purple-100 text-purple-800 rounded-lg shadow-md w-64 text-center font-medium">4. Chạy Lại (Re-run)</div>
                                    <div class="text-5xl text-blue-500 mt-4">↻</div>
                                    <div class="text-slate-600 font-medium">Lặp Lại... (Quay về bước 1)</div>
                                </div>

                                <div class="flex-1 max-w-md mt-6 md:mt-0">
                                    <h3 class="text-lg font-semibold text-slate-800">Ví dụ về vòng lặp:</h3>
                                    <ul class="list-none space-y-3 mt-2">
                                        <li class="flex items-start">
                                            <span class="text-blue-700 font-bold mr-2 w-20">Test:</span>
                                            <span class="text-slate-600">"Nút bấm có hoạt động không? Chuyện gì xảy ra nếu tôi không nhập gì?"</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-yellow-700 font-bold mr-2 w-20">Identify:</span>
                                            <span class="text-slate-600">"Khi tôi nhấn nút, trang web bị tải lại và không hiện kết quả."</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-700 font-bold mr-2 w-20">Refine:</span>
                                            <span class="text-slate-600">"Hãy cập nhật code JavaScript để ngăn chặn hành vi mặc định của form..."</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-purple-700 font-bold mr-2 w-20">Re-run:</span>
                                            <span class="text-slate-600">Chạy code mới và xem trước kết quả.</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-blue-700 font-bold mr-2 w-20">Test (Again):</span>
                                            <span class="text-slate-600">"Tốt rồi, giờ đã hoạt động!"</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="step-5" class="step-content hidden">
                        <h2 class="text-3xl font-semibold text-blue-800 mb-6">Giai đoạn 5: Publish lên GitHub</h2>
                        <p class="text-lg text-slate-700 leading-relaxed mb-6">
                            Khi sản phẩm của bạn đã hoạt động tốt và sẵn sàng, đã đến lúc chia sẻ hoặc lưu trữ nó một cách an toàn.
                        </p>
                        <div class="space-y-4">
                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
                                    </svg>
                                    1. Hoàn thiện Code
                                </h3>
                                <p class="card-body">Đảm bảo code của bạn sạch sẽ và hoạt động tốt sau Giai đoạn 4.</p>
                            </div>
                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                    </svg>
                                    2. Tạo Repository
                                </h3>
                                <p class="card-body">Trên GitHub, tạo một "kho chứa" (repository) mới cho dự án của bạn.</p>
                            </div>
                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5" />
                                    </svg>
                                    3. Tải Code Lên
                                </h3>
                                <ul class="list-disc list-outside ml-10 text-slate-600 space-y-1 card-body">
                                    <li><strong>Cách 1 (Đơn giản):</strong> Sao chép code, tạo tệp `index.html` trên máy tính và đẩy (push) lên GitHub.</li>
                                    <li><strong>Cách 2 (Tích hợp):</strong> Nếu môi trường của bạn hỗ trợ, tìm chức năng "Export to GitHub" hoặc "Publish".</li>
                                </ul>
                            </div>
                            <div class="content-card">
                                <h3 class="card-title">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125V6a3.375 3.375 0 0 0-3.375-3.375H8.25m0 11.25h1.5a1.125 1.125 0 0 0 1.125-1.125v-1.5a1.125 1.125 0 0 0-1.125-1.125H8.25m-6.75 0h1.5A1.125 1.125 0 0 1 4.125 9.75v1.5c0 .621-.504 1.125-1.125 1.125h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5c0-.621.504-1.125 1.125-1.125H2.25m15.375 0h1.5a1.125 1.125 0 0 1 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5c0-.621.504-1.125 1.125-1.125Z" />
                                    </svg>
                                    4. Viết tài liệu (README)
                                </h3>
                                <p class="card-body">Đừng quên tạo một tệp `README.md` để mô tả dự án của bạn, cách sử dụng và các tính năng của nó.</p>
                            </div>
                        </div>
                    </div>

                </main>
            </div>
            
            <footer class="p-6 text-center bg-white">
                <p class="text-sm text-slate-500">
                    Một ứng dụng web tương tác dựa trên quy trình sáng tạo.
                </p>
            </footer>
        </div>
    </div>


    <!-- SCRIPT TÍCH HỢP -->
    <script>
        // Hàm toàn cục để tránh xung đột
        var AppSwitcher = {};

        // === CÀI ĐẶT BỘ CHUYỂN TAB CHÍNH ===
        AppSwitcher.setupAppSwitcher = function() {
            const btnH5P = document.getElementById('btn-h5p');
            const btnProcess = document.getElementById('btn-process');
            const appH5P = document.getElementById('h5p-app');
            const appProcess = document.getElementById('process-app');
            
            const buttons = [btnH5P, btnProcess];
            const apps = [appH5P, appProcess];

            function showApp(appId) {
                if (appId === 'h5p') {
                    appH5P.classList.remove('hidden');
                    appProcess.classList.add('hidden');
                    btnH5P.classList.add('active');
                    btnProcess.classList.remove('active');
                } else if (appId === 'process') {
                    appH5P.classList.add('hidden');
                    appProcess.classList.remove('hidden');
                    btnH5P.classList.remove('active');
                    btnProcess.classList.add('active');
                }
            }

            btnH5P.addEventListener('click', () => showApp('h5p'));
            btnProcess.addEventListener('click', () => showApp('process'));

            // Hiển thị app H5P làm mặc định
            showApp('h5p');
        };

        // === CÀI ĐẶT ỨNG DỤNG 1: H5P ===
        AppSwitcher.setupH5PApp = function() {
            const h5pAppContainer = document.getElementById('h5p-app');
            if (!h5pAppContainer) return;

            const tabs = h5pAppContainer.querySelectorAll('.vertical-tabs button');
            const tabContents = h5pAppContainer.querySelectorAll('.vertical-tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const target = tab.getAttribute('data-tab');

                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));

                    tab.classList.add('active');
                    h5pAppContainer.querySelector(`#${target}`).classList.add('active');
                });
            });

            // AI Assistant functionality (scoped to H5P)
            const flashcardTopic = h5pAppContainer.querySelector('#flashcard-topic');
            const generateFlashcardsBtn = h5pAppContainer.querySelector('#generate-flashcards-btn');
            const flashcardLoader = h5pAppContainer.querySelector('#flashcard-loader');
            const flashcardOutput = h5pAppContainer.querySelector('#flashcard-output');
            
            const quizSourceText = h5pAppContainer.querySelector('#quiz-source-text');
            const quizType = h5pAppContainer.querySelector('#quiz-type');
            const generateQuizBtn = h5pAppContainer.querySelector('#generate-quiz-btn');
            const quizLoader = h5pAppContainer.querySelector('#quiz-loader');
            const quizOutput = h5pAppContainer.querySelector('#quiz-output');

            if (generateFlashcardsBtn) {
                generateFlashcardsBtn.addEventListener('click', async () => {
                    const topic = flashcardTopic.value;
                    if (!topic) {
                        flashcardOutput.textContent = 'Vui lòng nhập một chủ đề.';
                        return;
                    }
                    const systemPrompt = "Bạn là một trợ lý chuyên gia thiết kế bài giảng. Người dùng sẽ cung cấp một chủ đề. Hãy tạo một danh sách các thẻ học (flashcards) về chủ đề đó. Định dạng: 'Thuật ngữ: Định nghĩa' (ví dụ: 'Apple: Quả táo'). Mỗi thẻ trên một dòng. Phản hồi bằng ngôn ngữ của chủ đề được cung cấp (mặc định là tiếng Việt).";
                    const userPrompt = `Chủ đề: ${topic}`;
                    await AppSwitcher.callGeminiAPI(userPrompt, systemPrompt, flashcardLoader, flashcardOutput);
                });
            }

            if (generateQuizBtn) {
                generateQuizBtn.addEventListener('click', async () => {
                    const text = quizSourceText.value;
                    const type = quizType.value;
                    if (!text) {
                        quizOutput.textContent = 'Vui lòng dán văn bản nguồn.';
                        return;
                    }
                    const systemPrompt = `Bạn là một trợ lý chuyên gia thiết kế bài giảng. Dựa *chính xác* vào văn bản được cung cấp, hãy tạo 5 câu hỏi dạng ${type}. Nếu là "Trắc nghiệm", cung cấp 4 lựa chọn (A, B, C, D) và chỉ rõ đáp án đúng (ví dụ: 'Đáp án: A'). Phản hồi bằng tiếng Việt.`;
                    const userPrompt = `Văn bản nguồn: """${text}"""`;
                    await AppSwitcher.callGeminiAPI(userPrompt, systemPrompt, quizLoader, quizOutput);
                });
            }
        };

        // === CÀI ĐẶT ỨNG DỤNG 2: PROCESS ===
        AppSwitcher.setupProcessApp = function() {
            const processAppContainer = document.getElementById('process-app');
            if (!processAppContainer) return;

            let currentStep = 'step-1';

            // Định nghĩa lại showStep trong phạm vi này
            window.showStep = function(stepId) {
                const newStep = processAppContainer.querySelector(`#${stepId}`);
                if (!newStep) return;
                
                const oldStep = processAppContainer.querySelector(`#${currentStep}`);
                if (oldStep) oldStep.classList.add('hidden');
                
                const oldNav = processAppContainer.querySelector(`#nav-${currentStep}`);
                if (oldNav) oldNav.classList.remove('active');
                
                newStep.classList.remove('hidden');
                
                const newNav = processAppContainer.querySelector(`#nav-${stepId}`);
                if (newNav) newNav.classList.add('active');
                
                currentStep = stepId;
            }

            function setButtonLoading(button, isLoading) {
                const btnText = button.querySelector('.btn-text');
                const btnLoader = button.querySelector('.btn-loader');
                if (isLoading) {
                    button.disabled = true;
                    btnText.classList.add('hidden');
                    btnLoader.classList.remove('hidden');
                    btnLoader.classList.add('inline-flex');
                } else {
                    button.disabled = false;
                    btnText.classList.remove('hidden');
                    btnLoader.classList.add('hidden');
                    btnLoader.classList.remove('inline-flex');
                }
            }

            async function handleGenerateFeatures() {
                const ideaInput = processAppContainer.querySelector('#idea-input');
                const outputContainer = processAppContainer.querySelector('#features-output-container');
                const outputElement = processAppContainer.querySelector('#features-output');
                const button = processAppContainer.querySelector('#generate-features-btn');
                const idea = ideaInput.value.trim();
                if (!idea) { 
                    alert('Vui lòng nhập ý tưởng của bạn.'); // Sử dụng alert tạm thời
                    return; 
                }
                setButtonLoading(button, true);
                outputContainer.classList.add('hidden');
                const systemPrompt = "Bạn là một nhà thiết kế sản phẩm... (như cũ)";
                const payload = {
                    contents: [{ parts: [{ text: idea }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] }
                };
                try {
                    const resultText = await AppSwitcher.callGeminiAPI(idea, systemPrompt, button, outputElement, true);
                    outputElement.textContent = resultText;
                    outputContainer.classList.remove('hidden');
                } catch (error) {
                    outputElement.textContent = `Lỗi: ${error.message}`;
                    outputContainer.classList.remove('hidden');
                } finally {
                    setButtonLoading(button, false);
                }
            }

            async function handleGeneratePrompt() {
                const ideaInput = processAppContainer.querySelector('#prompt-idea-input');
                const outputContainer = processAppContainer.querySelector('#prompt-output-container');
                const outputElement = processAppContainer.querySelector('#prompt-output');
                const button = processAppContainer.querySelector('#generate-prompt-btn');
                const idea = ideaInput.value.trim();
                if (!idea) { 
                    alert('Vui lòng mô tả ý tưởng của bạn.'); // Sử dụng alert tạm thời
                    return; 
                }
                setButtonLoading(button, true);
                outputContainer.classList.add('hidden');
                const systemPrompt = "Bạn là một kỹ sư prompt... (như cũ)";
                const payload = {
                    contents: [{ parts: [{ text: idea }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] }
                };
                try {
                    const resultText = await AppSwitcher.callGeminiAPI(idea, systemPrompt, button, outputElement, true);
                    outputElement.textContent = resultText;
                    outputContainer.classList.remove('hidden');
                } catch (error) {
                    outputElement.textContent = `Lỗi: ${error.message}`;
                    outputContainer.classList.remove('hidden');
                } finally {
                    setButtonLoading(button, false);
                }
            }

            // Gắn sự kiện cho các nút của Process App
            const genFeaturesBtn = processAppContainer.querySelector('#generate-features-btn');
            const genPromptBtn = processAppContainer.querySelector('#generate-prompt-btn');
            if (genFeaturesBtn) genFeaturesBtn.addEventListener('click', handleGenerateFeatures);
            if (genPromptBtn) genPromptBtn.addEventListener('click', handleGeneratePrompt);
            
            // Kích hoạt bước đầu tiên
            showStep('step-1');
        };


        // === HÀM GỌI API CHUNG ===
        AppSwitcher.callGeminiAPI = async function(prompt, systemInstruction, loaderElement, outputElement, isButton = false) {
            if (isButton) {
                // Biến loaderElement thực ra là button
                AppSwitcher.setButtonLoading(loaderElement, true);
            } else {
                loaderElement.classList.remove('hidden');
            }
            outputElement.textContent = '';
            
            const apiKey = "";
            const API_MODEL = 'gemini-2.5-flash-preview-09-2025';
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${API_MODEL}:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemInstruction }] }
            };

            let retries = 3, delay = 1000;
            while (retries > 0) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        if (response.status === 429 || response.status >= 500) {
                            throw new Error(`Server error/Rate limit: ${response.status}`); // Thử lại
                        } else {
                            throw new Error(`API error: ${response.status}`); // Không thử lại
                        }
                    }

                    const result = await response.json();
                    const candidate = result.candidates?.[0];
                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        if (isButton) {
                            AppSwitcher.setButtonLoading(loaderElement, false);
                        } else {
                            loaderElement.classList.add('hidden');
                        }
                        return candidate.content.parts[0].text; // Trả về kết quả
                    } else {
                        throw new Error('Định dạng phản hồi không hợp lệ.');
                    }

                } catch (error) {
                    retries--;
                    if (retries === 0) {
                        outputElement.textContent = `Lỗi: ${error.message}`;
                        if (isButton) {
                            AppSwitcher.setButtonLoading(loaderElement, false);
                        } else {
                            loaderElement.classList.add('hidden');
                        }
                        return null; // Trả về null khi lỗi
                    }
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2;
                }
            }
        };

        // Gán hàm setButtonLoading vào global object để AppSwitcher.callGeminiAPI có thể gọi
        AppSwitcher.setButtonLoading = function(button, isLoading) {
            const btnText = button.querySelector('.btn-text');
            const btnLoader = button.querySelector('.btn-loader');
            if (isLoading) {
                button.disabled = true;
                btnText.classList.add('hidden');
                btnLoader.classList.remove('hidden');
                btnLoader.classList.add('inline-flex');
            } else {
                button.disabled = false;
                btnText.classList.remove('hidden');
                btnLoader.classList.add('hidden');
                btnLoader.classList.remove('inline-flex');
            }
        };


        // === KHỞI CHẠY TẤT CẢ SAU KHI TẢI TRANG ===
        document.addEventListener('DOMContentLoaded', () => {
            AppSwitcher.setupAppSwitcher();
            AppSwitcher.setupH5PApp();
            AppSwitcher.setupProcessApp();
        });
    </script>
</body>
</html>

